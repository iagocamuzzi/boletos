<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesquisar Boletos</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "32c7568bbc8d079ea71d1dd1fa45a202dbcc20bb",
            authDomain: "boletosvistalinda.firebaseapp.com",
            projectId: "boletosvistalinda",
            storageBucket: "boletosvistalinda.appspot.com",
            messagingSenderId: "809943988538",
            appId: "1:809943988538:web:4e25ccb03f5c940600f803"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        async function pesquisarBoleto() {
            const termo = document.getElementById("inputPesquisa").value.trim().toLowerCase();
            const resultadoContainer = document.getElementById("resultado");

            if (!termo) {
                resultadoContainer.innerHTML = "<p>Por favor, insira um nome ou TSO para pesquisar.</p>";
                return;
            }

            const boletosRef = ref(database, "boletos");
            const snapshot = await get(boletosRef);
            const boletos = snapshot.val();
            resultadoContainer.innerHTML = "";

            let encontrado = false;

            for (const id in boletos) {
                const boleto = boletos[id];
                if (
                    boleto.nomeCliente.toLowerCase().includes(termo) ||
                    boleto.tso.toLowerCase().includes(termo)
                ) {
                    encontrado = true;
                    const div = document.createElement("div");
                    div.classList.add("boleto-card");
                    div.innerHTML = `
                        <p><strong>Nome do Cliente:</strong> ${boleto.nomeCliente}</p>
                        <p><strong>TSO:</strong> ${boleto.tso}</p>
                        <p><strong>Valor da Parcela:</strong> ${boleto.valorParcela}</p>
                        <p><strong>Status:</strong> ${boleto.status}</p>
                        <p><strong>Vencimento:</strong> ${boleto.vencimento}</p>
                        <p><strong>Data de Pagamento:</strong> ${boleto.dataPagamento || "N/A"}</p>
                    `;
                    resultadoContainer.appendChild(div);
                }
            }

            if (!encontrado) {
                resultadoContainer.innerHTML = "<p>Nenhum boleto encontrado com o termo informado.</p>";
            }
        }
    </script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        h1 {
            margin-bottom: 20px;
            color: #6200ea;
        }

        #inputPesquisa {
            padding: 10px;
            font-size: 16px;
            width: 300px;
            margin-bottom: 20px;
        }

        button {
            padding: 10px 15px;
            background-color: #6200ea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #3700b3;
        }

        .boleto-card {
            background-color: #fff;
            border-radius: 8px;
            padding: 15px;
            margin: 10px auto;
            width: 300px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            text-align: left;
        }

        .boleto-card p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>Pesquisar Boletos</h1>
    <input type="text" id="inputPesquisa" placeholder="Digite o TSO ou Nome do Cliente">
    <button onclick="pesquisarBoleto()">Pesquisar</button>
    <div id="resultado"></div>
</body>
</html>
